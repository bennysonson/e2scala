(()=>{"use strict";var e=wp.components.CheckboxControl;const t=function(t){var n=t.listItems,l=t.selected,a=t.onItemChange,s=t.label;return wp.element.createElement("div",{className:"components-base-control"},wp.element.createElement("label",{class:"components-base-control__label"},s),wp.element.createElement("ul",{className:"multibox__checklist"},n.map((function(t){return wp.element.createElement("li",{key:t.value,className:"multibox__checklist-item"},wp.element.createElement(e,{label:t.label,checked:l.includes(t.value),onChange:function(){a(t.value)}}))}))))};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=wp.i18n.__,u=wp.element,m=u.Component,y=u.Fragment,d=u.createRef,h=wp.editor.InspectorControls,f=wp.apiFetch,b=wp.components,v=b.PanelBody,g=b.TextControl,w=b.SelectControl,E=b.RangeControl,C=b.ToggleControl,x=b.ServerSideRender,S=b.VisuallyHidden,T=b.Card,A=b.CardBody,I=b.CardHeader;const k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(k,e);var n,a,u,m,b=(u=k,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=r(u);if(m){var n=r(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return i(this,e)});function k(){var e;return s(this,k),(e=b.apply(this,arguments)).state={postTypes:[],pageList:[],taxonomies:[],termsList:[],styleList:[]},e.fetching=!1,e.styleSupport={},e.elemRef=d(),e}return n=k,(a=[{key:"apiDataFetch",value:function(e,t){var n=this;if(this.fetching)setTimeout(this.apiDataFetch.bind(this,e,t),200);else{var l={};this.fetching=!0,f({path:"/dpt/v1/"+t}).then((function(t){var a=Object.keys(t);a=a.map((function(e){return{label:t[e],value:e}})),l[e]=a,n.setState(l),n.fetching=!1})).catch((function(){l[e]=[],n.setState(l),n.fetching=!1}))}}},{key:"componentDidMount",value:function(){var e=this.props.attributes.postType;this.apiDataFetch("postTypes","posttypes"),e&&("page"===e?this.getPagesList():(this.updateTaxonomy(),this.updateTerms())),this.getStyleList()}},{key:"componentDidUpdate",value:function(e){var t=e.attributes,n=t.postType,l=t.taxonomy,a=this.props.attributes,s=a.postType,o=a.taxonomy;n!==s&&(this.updateTaxonomy(),"page"===s&&this.getPagesList()),l!==o&&this.updateTerms()}},{key:"updateTaxonomy",value:function(){var e=this.props.attributes.postType;e&&"page"!==e?this.apiDataFetch("taxonomies","taxonomies/"+e):this.setState({taxonomies:[],termsList:[]})}},{key:"updateTerms",value:function(){var e=this.props.attributes.taxonomy;e?this.apiDataFetch("termsList","terms/"+e):this.setState({termsList:[]})}},{key:"getPagesList",value:function(){this.apiDataFetch("pageList","pagelist")}},{key:"getStyleList",value:function(){var e=this;f({path:"/dpt/v1/stylelist"}).then((function(t){var n=Object.keys(t),l=n.map((function(e){return{label:t[e].label,value:e}}));n.forEach((function(n){e.styleSupport[n]=t[n].support})),e.setState({styleList:l})})).catch((function(){e.setState({styleList:[]})}))}},{key:"render",value:function(){var e=this,n=this.state,a=n.postTypes,s=n.taxonomies,o=n.pageList,p=n.termsList,i=n.styleList,r=this.props,u=r.attributes,m=r.setAttributes,d=u.postType,f=u.taxonomy,b=u.terms,k=u.relation,L=u.postIds,O=u.pages,D=u.number,P=u.orderBy,R=u.order,M=u.styles,_=u.styleSup,j=u.imageCrop,z=u.imgAspect,B=u.imgAlign,F=u.brRadius,N=u.colNarr,G=u.plHolder,H=u.showPgnation,W=u.textAlign,q=u.vGutter,U=u.hGutter,V=u.eLength,$=u.eTeaser,J=u.offset,K=u.autoTime,Q=u.meta1,X=u.meta2,Y=function(t){var n=[{value:"thumbnail",label:c("Thumbnail","display-post-types")},{value:"title",label:c("Title","display-post-types")},{value:"meta",label:c("Meta Info 1","display-post-types")},{value:"category",label:c("Meta info 2","display-post-types")},{value:"excerpt",label:c("Excerpt","display-post-types")},{value:"date",label:c("Date","display-post-types")},{value:"ago",label:c("Ago","display-post-types")},{value:"author",label:c("Author","display-post-types")},{value:"content",label:c("Content","display-post-types")}],l=e.styleSupport[t];return void 0!==l&&n.filter((function(e){return"category"!==e.value?l.includes(e.value):l.includes(e.value)&&"post"===d}))},Z=function(t,n){var l=e.styleSupport[t];return void 0!==l&&l.includes(n)},ee=function(e){var t=_.indexOf(e);m(-1===t?{styleSup:[].concat(l(_),[e])}:{styleSup:_.filter((function(t){return t!==e}))})},te=[{value:"date",label:c("Publish Date","display-post-types")},{value:"modified",label:c("Modified Date","display-post-types")},{value:"title",label:c("Title","display-post-types")},{value:"author",label:c("Author","display-post-types")},{value:"comment_count",label:c("Comment Count","display-post-types")},{value:"rand",label:c("Random","display-post-types")}],ne=[{value:"",label:c("No Cropping","display-post-types")},{value:"land1",label:c("Landscape (4:3)","display-post-types")},{value:"land2",label:c("Landscape (3:2)","display-post-types")},{value:"port1",label:c("Portrait (3:4)","display-post-types")},{value:"port2",label:c("Portrait (2:3)","display-post-types")},{value:"wdscrn",label:c("Widescreen (16:9)","display-post-types")},{value:"squr",label:c("Square (1:1)","display-post-types")}],le=[{value:"topleftcrop",label:c("Top Left Cropping","display-post-types")},{value:"topcentercrop",label:c("Top Center Cropping","display-post-types")},{value:"centercrop",label:c("Center Cropping","display-post-types")},{value:"bottomcentercrop",label:c("Bottom Center Cropping","display-post-types")},{value:"bottomleftcrop",label:c("Bottom Left Cropping","display-post-types")}];return wp.element.createElement(y,null,wp.element.createElement(h,null,wp.element.createElement(v,{title:c("Setup Display Post Types","display-post-types")},a&&wp.element.createElement(w,{label:c("Select a Post Type","display-post-types"),value:d,options:a,onChange:function(e){return function(e){m({terms:[]}),m({taxonomy:""}),m({postType:e})}(e)}})),wp.element.createElement(v,{initialOpen:!1,title:c("Get items to be displayed","display-post-types")},wp.element.createElement("div",{style:{paddingBottom:"10px"}},wp.element.createElement(T,{size:"small"},wp.element.createElement(I,null,wp.element.createElement("label",{style:{fontWeight:"bold"}},c("Filter Items","display-post-types"))),wp.element.createElement(A,null,!!s.length&&wp.element.createElement(w,{label:c("Filter items by Taxonomy","display-post-types"),value:f,options:s,onChange:function(e){return function(e){m({terms:[]}),m({taxonomy:e})}(e)}}),"page"===d&&!!o.length&&wp.element.createElement(t,{listItems:o,selected:O,onItemChange:function(e){var t=O.indexOf(e);m(-1===t?{pages:[].concat(l(O),[e])}:{pages:O.filter((function(t){return t!==e}))})},label:c("Select Pages","display-post-types")}),!!p.length&&wp.element.createElement(t,{listItems:p,selected:b,onItemChange:function(e){var t=b.indexOf(e);m(-1===t?{terms:[].concat(l(b),[e])}:{terms:b.filter((function(t){return t!==e}))})},label:c("Select Taxonomy Terms","display-post-types")}),!!p.length&&wp.element.createElement(w,{label:c("Terms Relationship","display-post-types"),value:k,onChange:function(e){return m({relation:e})},options:[{value:"IN",label:c("OR - Show posts from any of the terms selected above.","display-post-types")},{value:"AND",label:c("AND - Show posts only if they belong to all of the selected terms.","display-post-types")}]}),"page"!==d&&wp.element.createElement(g,{label:c("Filter items by Post IDs (optional)","display-post-types"),value:L,onChange:function(e){return m({postIds:e})},help:c("Comma separated ids, i.e. 230,300","display-post-types")})))),"page"!==d&&wp.element.createElement("div",{style:{paddingBottom:"10px"}},wp.element.createElement(T,{size:"small"},wp.element.createElement(I,null,wp.element.createElement("label",{style:{fontWeight:"bold"}},c("Sort Items","display-post-types"))),wp.element.createElement(A,null,wp.element.createElement(w,{label:c("Sort By","display-post-types"),value:P,onChange:function(e){return m({orderBy:e})},options:te}),wp.element.createElement(w,{label:c("Sort Order","display-post-types"),value:R,onChange:function(e){return m({order:e})},options:[{value:"DESC",label:c("Descending","display-post-types")},{value:"ASC",label:c("Ascending","display-post-types")}]})))),wp.element.createElement("div",{style:{paddingBottom:"10px"}},wp.element.createElement(T,{size:"small"},wp.element.createElement(I,null,wp.element.createElement("label",{style:{fontWeight:"bold"}},c("Display Settings","display-post-types"))),wp.element.createElement(A,null,wp.element.createElement(E,{label:c("Number of items to display","display-post-types"),value:D,onChange:function(e){return m({number:e})},min:1}),"page"!==d&&wp.element.createElement(E,{label:c("Offset (number of posts to displace)","display-post-types"),value:J,onChange:function(e){return m({offset:e})},min:0}),M&&!Z(M,"slider")&&wp.element.createElement(C,{label:c("Show Pagination.","display-post-types"),checked:!!H,onChange:function(e){return m({showPgnation:e})}}))))),wp.element.createElement(v,{initialOpen:!1,title:c("Setup Items Layout","display-post-types")},!!i.length&&wp.element.createElement(w,{label:c("Display Style","display-post-types"),value:M,onChange:function(e){return m({styles:e})},options:i}),wp.element.createElement(S,null,!!i.length&&wp.element.createElement(t,{listItems:Y(M),selected:_,onItemChange:ee,label:c("Items supported by display style","display-post-types")})),M&&Z(M,"multicol")&&wp.element.createElement(E,{label:c("Maximum grid columns (Responsive)","display-post-types"),value:N,onChange:function(e){return m({colNarr:e})},min:1,max:8}),wp.element.createElement(E,{label:c("Horizontal Gutter (in px)","display-post-types"),value:U,onChange:function(e){return m({hGutter:e})},min:0,max:100}),wp.element.createElement(E,{label:c("Vertical Gutter (in px)","display-post-types"),value:q,onChange:function(e){return m({vGutter:e})},min:0,max:100}),M&&Z(M,"slider")&&wp.element.createElement(E,{label:c("Auto slide timer (delay in ms)","display-post-types"),value:K,onChange:function(e){return m({autoTime:e})},min:0,max:1e4,step:500})),wp.element.createElement(v,{initialOpen:!1,title:c("Manage Display Elements","display-post-types")},wp.element.createElement(v,{initialOpen:!1,title:c("Item Wrapper","display-post-types")},wp.element.createElement(w,{label:c("Text Align","display-post-types"),value:W,onChange:function(e){return m({textAlign:e})},options:[{value:"",label:c("Left Align","display-post-types")},{value:"r-text",label:c("Right Align","display-post-types")},{value:"c-text",label:c("Center Align","display-post-types")}]}),wp.element.createElement(E,{label:c("Border Radius (in px)","display-post-types"),value:F,onChange:function(e){return m({brRadius:e})},min:0,max:100})),wp.element.createElement("div",{className:"dpt-elem-container"},!!i.length&&Y(M).map((function(e){return wp.element.createElement(v,{initialOpen:!1,title:e.label},function(e){switch(e.value){case"thumbnail":return wp.element.createElement("div",null,wp.element.createElement(C,{label:c("Show Thumbnail","display-post-types"),checked:!!_.includes("thumbnail"),onChange:function(){ee("thumbnail")}}),wp.element.createElement(C,{label:c("Thumbnail Placeholder","display-post-types"),checked:!!G,onChange:function(e){return m({plHolder:e})}}),wp.element.createElement(w,{label:c("Image Cropping","display-post-types"),value:z,onChange:function(e){return m({imgAspect:e})},options:ne}),""!==z&&wp.element.createElement(w,{label:c("Image Cropping Position","display-post-types"),value:j,onChange:function(e){return m({imageCrop:e})},options:le}),M&&Z(M,"ialign")&&wp.element.createElement(w,{label:c("Image Alignment","display-post-types"),value:B,onChange:function(e){return m({imgAlign:e})},options:[{value:"",label:c("Left Aligned","display-post-types")},{value:"right",label:c("Right Aligned","display-post-types")}]}));case"title":return wp.element.createElement("div",null,wp.element.createElement(C,{label:c("Show Title","display-post-types"),checked:!!_.includes("title"),onChange:function(){ee("title")}}));case"excerpt":return wp.element.createElement("div",null,wp.element.createElement(C,{label:c("Show Excerpt","display-post-types"),checked:!!_.includes("excerpt"),onChange:function(){ee("excerpt")}}),_.includes("excerpt")&&Z(M,"excerpt")&&wp.element.createElement(E,{label:c("Excerpt Length (in words)","display-post-types"),value:V,onChange:function(e){return m({eLength:e})},min:0}),_.includes("excerpt")&&Z(M,"excerpt")&&wp.element.createElement(g,{label:c("Excerpt Teaser Text","display-post-types"),value:$,onChange:function(e){return m({eTeaser:e})},help:c("i.e., Continue Reading, Read More","display-post-types")}));case"content":return wp.element.createElement("div",null,wp.element.createElement(C,{label:c("Show Full Content","display-post-types"),checked:!!_.includes("content"),onChange:function(){ee("content")}}));case"meta":return wp.element.createElement("div",null,wp.element.createElement(C,{label:c("Show Meta Info - 1","display-post-types"),checked:!!_.includes("meta"),onChange:function(){ee("meta")}}),wp.element.createElement(g,{label:c("Meta Info to be displayed","display-post-types"),value:Q,onChange:function(e){return m({meta1:e})}}));case"category":return wp.element.createElement("div",null,wp.element.createElement(C,{label:c("Show Meta Info - 2","display-post-types"),checked:!!_.includes("category"),onChange:function(){ee("category")}}),wp.element.createElement(g,{label:c("Meta Info to be displayed","display-post-types"),value:X,onChange:function(e){return m({meta2:e})}}));default:return""}}(e))}))))),wp.element.createElement("div",{className:"dpt-container",ref:this.elemRef},wp.element.createElement(x,{block:"dpt/display-post-types",attributes:this.props.attributes})))}}])&&o(n.prototype,a),k}(m);var L=wp.i18n.__;(0,wp.blocks.registerBlockType)("dpt/display-post-types",{title:L("Display Post Types","display-post-types"),description:L("Filter and display any pages, posts or post types.","display-post-types"),icon:wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},wp.element.createElement("path",{d:"M9.143 22.286v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM9.143 13.143v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM20.571 22.286v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM9.143 4v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM20.571 13.143v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM32 22.286v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM20.571 4v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM32 13.143v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM32 4v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714z"})),category:"layout",keywords:[L("display posts","display-post-types"),L("post types","display-post-types")],edit:k,save:function(){return null}})})();